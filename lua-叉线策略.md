# Lua 叉线策略

## train 流程

获取标定的所有市场、采样获取历史数据（K线，大盘，基本面）

所有市场、采样、标的计算公式值（Indicator）

对应于各个计算任务，有效从各个留存数据中进行编排，整合触发决策

## backtest 流程

获取标定的所有市场、采样获取历史数据（K线，大盘，基本面）

所有市场、采样、标的计算公式值（Indicator）

对计算任务，有效从各个留存数据中进行编排，整合触发决策

## online 流程

获取标定的所有市场、采样获取历史数据（K线，大盘，基本面）

所有市场、采样、标的计算公式值（Indicator）

对计算任务，有效从各个留存数据中进行编排，整合触发决策

进入实盘段落，

之前的历史数据进行维护，在触发点到达时，获取所有市场、采样的行情信息，如果该触发点应当触发数据的更新，则触发更新。

对于基本面数据，时时刻刻都尝试从数据库中读取更新的信息，如果没有新的记录，则没有变化，否则压入新的信息。

如果发现，当前复权因子与一贯采用的复权因子不同，则需要更新复权因子（关注的标的内），分析发生复权的对象，对相应的历史数据、账户进行复权维护。

对象包括：

读取数据的模块：DataSource，利用给定的复权因子，获取一段时间内、标的的历史数据（K线、基本面）

计算Indicator的模块：IndicatorProducer，利用给定的数据（多个TimePanel），计算得到一个新的TimePanel，里面填入公式计算值。

编排同步维护的模块：Engine，读取多个历史数据源，依据数据触发原则，模拟交易过程，调用Decide、Evaluate进行分析。

实盘维护的模块：OnlineCrons

# Lua 加速计划

1. 测试计算瓶颈，衡量计算方式

2. 测算加速可能带来的红利。
3. 构想实现的方式。
4. 进行实现。

