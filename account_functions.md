# 账户相关函数

账户相关的函数主要完成账户的查看以及下单操作

## 账户查看

用户可以查看当前账户内的现金以及各项持仓信息，还可以获取账户价值方面的信息。

------------
```
portfolio.cash()
```
当前现金数量。

---------------
```
portfolio.position(target)
```
股票的持仓信息。

| 参数名称 | 类型 | 说明 |
| ----   | --| -- |
|target| 字符串 | 标的，例如 "000001.SZ"|

返回值为一个table，包含三个元素，分别为：
```
{
  quantity 数值，股票持仓股数
  sellable 数值，股票可卖持仓
  value    数值，持仓股票价值
}
```
如果标的不在股票池内，则返回值内各个元素都为0.

----------
```
portfolio.startingCash
```
初始现金数。

-----------
```
portfolio.totalReturns()
```
当前总收益率。(-1 到 1 之间)

------------
```
portfolio.portfolioValue()
```
账户总价值（包含股票和现金）。

------------
```
portfolio.marketValue()
```
持仓股票总价值。

------------
```
portfolio.profitAndLoss()
```
净收入（亏损）。




## 下单

目前该平台仅支持市价下单，平台将会对下单进行检查，如果交易成功，则返回0，如果存在问题，则将返回非零的错误号。且目前采用简化的撮合方式，认为通过基本检查的订单一定可以成交，交易计算了手续费，手续费相关信息将在其他章节进行介绍（尚未完成）。交易的滑点设置将在近期开放。

----------
```
order(target, amount)
```
买卖一定股数的股票，目前股数只能为整百，目前的账户复权处理将会自动将非整手的股票转卖为现金。

| 参数名称 | 类型 | 说明 |
| ----   | --| -- |
|target| 字符串 | 买卖标的，例如 "000001.SZ"|
|amount| 数值 | 买卖股数（负数为卖） |

返回值为数值，其含义为：
```
0 交易成功
1 未知错误
2 现金不足
3 股票停牌
4 股票可卖数量不足
5 股票涨停时买入，股票跌停时卖出
6 标的未知
```
后续还会增加交易量的检查。

----------
```
orderLots(target, amount)
```
买卖一定<span style="color:red">手</span>数的股票。

| 参数名称 | 类型 | 说明 |
| ----   | --| -- |
|target| 字符串 | 买卖标的，例如 "000001.SZ"|
|amount| 数值 | 买卖手数（负数为卖） |

返回值与`order`相同。

------------
```
orderValue(target, value)
```
买卖一定<span style="color:red">价值</span>的股票。

| 参数名称 | 类型 | 说明 |
| ----   | --| -- |
|target| 字符串 | 买卖标的，例如 "000001.SZ"|
|value| 数值 | 买卖股票的总价值（负数为卖） |

返回值与`order`相同。

------------
```
orderPercent(target, percentage)
```
买卖一定<span style="color:red">总价值比例</span>的股票。

| 参数名称 | 类型 | 说明 |
| ----   | --| -- |
|target| 字符串 | 买卖标的，例如 "000001.SZ"|
|percentage| 数值 | -1 到 1 之间，代表买卖该股票占总账户价值的比例（负数为卖） |

返回值与`order`相同。

------------

之后我们将改进现有的撮合机制，将下单和撮合分离，提供更加丰富的下单功能。

[回到目录](README.md)